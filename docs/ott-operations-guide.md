# OTT 미디어 운영 가이드

이 문서는 Tencent Cloud MCP 시스템을 OTT 미디어 운영 업무에 활용하는 방법을 설명합니다.

## 🎯 OTT 운영에서의 활용 시나리오

### 1. 라이브 방송 모니터링 및 제어

#### 시나리오: 라이브 방송 시작 전 점검

**Slack Bot 사용:**
```
운영자: /tencent
→ 대시보드에서 채널 상태 확인
→ "KBO-2024-01-27" 채널 선택
→ Status 탭에서 입력 상태 확인
→ "MAIN 입력 활성" 확인 ✅
→ Start 버튼으로 채널 시작
```

**MCP Server 사용 (Claude Desktop):**
```
운영자: "오늘 저녁 7시 KBO 경기 방송 전에 channel-kbo-001 상태 확인해줘"

→ Claude가 자동으로:
   1. get_full_status() 호출
   2. StreamLive 상태 확인
   3. StreamPackage 연결 확인
   4. CSS 스트림 활성화 확인
   5. 연결된 StreamLink 플로우 확인
   
→ 자연어 리포트:
   "channel-kbo-001 상태 점검 결과:
   ✅ StreamLive: MAIN 입력 활성, 상태 정상
   ✅ StreamPackage: 연결됨, MAIN 입력 사용 중
   ✅ CSS: 스트림 활성화됨
   ✅ 연결된 StreamLink 플로우: 2개 모두 running
   
   방송 시작 준비 완료!"
```

#### 시나리오: 실시간 상태 모니터링

```
운영자: "현재 방송 중인 모든 채널 상태를 보여줘"

→ list_channels(status="running") 호출
→ 자연어 리포트:
   "현재 5개 채널이 방송 중입니다:
   1. channel-kbo-001: KBO 경기 (running, MAIN 입력)
   2. channel-sports-002: 스포츠 하이라이트 (running, MAIN 입력)
   ..."
```

### 2. Failover 상황 대응

#### 시나리오: MAIN 입력 장애 감지 및 대응

**자동 감지:**
```
운영자: "channel-kbo-001의 입력 상태 확인해줘"

→ get_input_status() 호출
→ 로그 기반 감지: PipelineFailover 이벤트 발견
→ 자연어 리포트:
   "⚠️ 경고: channel-kbo-001에서 failover가 발생했습니다!
   
   - 현재 상태: BACKUP 입력으로 전환됨
   - 발생 시간: 2024-01-27 19:15:23
   - 24시간 내 failover 횟수: 1회
   - 마지막 이벤트: PipelineFailover
   
   MAIN 입력 복구를 확인하세요."
```

**수동 대응:**
```
운영자: "channel-kbo-001을 재시작해줘"

→ restart_channel() 호출
→ 채널 재시작 후 상태 확인
→ 자연어 리포트:
   "channel-kbo-001이 재시작되었습니다.
   현재 MAIN 입력으로 복구되었습니다."
```

### 3. 방송 스케줄 관리

#### 시나리오: 주간 방송 스케줄 확인

```
운영자: "이번 주 방송 스케줄을 보여줘"

→ list_schedules(days=7) 호출
→ 자연어 리포트:
   "이번 주 방송 스케줄 (7일):
   
   📅 1월 27일 (오늘)
   19:00-22:00: KBO 경기 (channel-kbo-001)
      담당: 김운영, 자동 시작: ✅
   
   📅 1월 28일 (내일)
   14:00-17:00: 스포츠 하이라이트 (channel-sports-002)
      담당: 이운영, 자동 시작: ✅
   
   총 5개 스케줄이 예정되어 있습니다."
```

#### 시나리오: 긴급 방송 스케줄 추가

```
운영자: "오늘 밤 11시부터 1시까지 긴급 방송 스케줄 추가해줘. 
         channel-news-001 사용하고, 담당자는 박운영이야"

→ create_schedule() 호출
→ 자연어 리포트:
   "긴급 방송 스케줄이 등록되었습니다:
   - 채널: channel-news-001 (News Channel)
   - 시간: 2024-01-27 23:00 ~ 2024-01-28 01:00
   - 담당자: 박운영
   - 자동 시작: ❌ (수동 시작 필요)
   
   스케줄 ID: abc12345"
```

### 4. 장애 대응 및 트러블슈팅

#### 시나리오: 스트림 중단 문제 해결

```
운영자: "channel-kbo-001이 갑자기 중단됐어. 원인 확인해줘"

→ Claude가 자동으로:
   1. get_channel_status() - 채널 상태 확인
   2. get_input_status() - 입력 상태 확인
   3. get_streampackage_status() - StreamPackage 확인
   4. get_css_stream_status() - CSS 스트림 확인
   
→ 자연어 리포트:
   "장애 원인 분석 결과:
   
   ❌ StreamLive: 채널이 중지됨 (stopped)
   ❌ StreamPackage: 연결 끊김
   ❌ CSS: 스트림 비활성화
   ✅ StreamLink: 플로우는 정상 (running)
   
   추정 원인: StreamLive 채널이 예기치 않게 중지됨
   
   권장 조치:
   1. 채널 재시작: restart_channel(channel-kbo-001)
   2. StreamPackage 연결 확인
   3. CSS 스트림 재활성화 확인"
```

#### 시나리오: 입력 소스 문제 진단

```
운영자: "channel-kbo-001의 입력이 계속 끊겨. 문제 확인해줘"

→ get_input_status() 호출
→ 자연어 리포트:
   "입력 상태 분석:
   
   현재 상태: BACKUP 입력 사용 중
   - MAIN 입력: 신호 없음 (Status: 0)
   - BACKUP 입력: 활성 (Status: 1)
   - 24시간 내 failover: 3회 발생
   
   ⚠️ MAIN 입력 소스에 문제가 있습니다.
   
   확인 사항:
   1. MAIN 입력 소스 장비 상태
   2. 네트워크 연결 상태
   3. StreamLink 플로우 상태"
```

### 5. 리소스 통합 모니터링

#### 시나리오: 전체 인프라 상태 대시보드

```
운영자: "현재 모든 방송 인프라 상태를 한눈에 보여줘"

→ Claude가 자동으로:
   1. list_channels() - 모든 채널
   2. list_streampackage_channels() - StreamPackage
   3. list_css_streams() - CSS 스트림
   4. get_upcoming_schedules() - 예정된 스케줄
   
→ 자연어 리포트:
   "📊 전체 인프라 상태 리포트
   
   StreamLive 채널: 10개
   - Running: 5개
   - Idle: 3개
   - Stopped: 2개
   
   StreamLink 플로우: 8개
   - Running: 6개
   - Idle: 2개
   
   StreamPackage 채널: 5개
   - 모두 정상 연결
   
   CSS 활성 스트림: 5개
   - 모두 정상
   
   예정된 방송: 3개 (오늘)
   
   ⚠️ 주의: 2개 채널이 중지 상태"
```

### 6. 자동화된 운영 워크플로우

#### 시나리오: 방송 시작 전 자동 점검

**스케줄 기반 자동 알림:**
```
시스템: (방송 2시간 전)
→ 스케줄 확인
→ 담당자에게 Slack 알림:
   "2시간 후 방송 예정: KBO 경기
   채널: channel-kbo-001
   자동 점검 결과:
   ✅ 채널 상태: Idle (정상)
   ✅ 입력 상태: MAIN 활성
   ✅ StreamPackage 연결: 정상
   
   방송 준비 완료!"
```

**자동 시작:**
```
시스템: (방송 시작 시간)
→ auto_start 스케줄 확인
→ 채널 자동 시작
→ 상태 확인
→ 담당자에게 알림:
   "방송이 자동으로 시작되었습니다:
   ✅ channel-kbo-001: Running
   ✅ StreamPackage: 연결됨
   ✅ CSS 스트림: 활성화됨"
```

### 7. 보고서 생성

#### 시나리오: 일일 운영 리포트

```
운영자: "어제 하루 방송 현황 리포트 만들어줘"

→ Claude가 자동으로:
   1. 어제 스케줄 조회
   2. 채널 상태 이력 분석
   3. Failover 발생 횟수 집계
   4. 장애 발생 내역 정리
   
→ 자연어 리포트:
   "📋 2024-01-26 일일 운영 리포트
   
   방송 현황:
   - 총 방송: 8건
   - 정상 종료: 7건
   - 중간 중단: 1건
   
   Failover 발생:
   - 총 2회
   - channel-kbo-001: 1회 (19:23)
   - channel-sports-002: 1회 (21:45)
   
   장애 발생:
   - channel-news-001: 22:00 중단 (10분 후 복구)
   
   평균 방송 시간: 2시간 15분
   총 방송 시간: 18시간"
```

## 🛠️ 실제 운영 시나리오별 사용법

### 시나리오 A: 평일 라이브 방송 운영

**오전 준비:**
```
1. "오늘 방송 스케줄 보여줘"
2. "각 채널 상태 확인해줘"
3. "예정된 방송 채널들 자동 시작 설정 확인"
```

**방송 중 모니터링:**
```
1. "현재 방송 중인 채널 상태 확인"
2. "입력 상태가 main인지 backup인지 확인"
3. "CSS 스트림이 정상인지 확인"
```

**방송 종료:**
```
1. "오늘 방송 스케줄 모두 완료되었는지 확인"
2. "중지된 채널들 정리 상태 확인"
```

### 시나리오 B: 긴급 방송 대응

**긴급 방송 시작:**
```
1. "channel-news-001 즉시 시작해줘"
2. "시작 후 전체 상태 확인해줘"
3. "CSS 스트림 활성화 확인"
```

**긴급 방송 중 문제 발생:**
```
1. "channel-news-001 상태 확인해줘"
2. "입력이 끊겼으면 backup으로 전환되었는지 확인"
3. "문제가 있으면 재시작해줘"
```

### 시나리오 C: 주말 대량 방송 관리

**주말 스케줄 확인:**
```
1. "이번 주말 방송 스케줄 전체 보여줘"
2. "각 채널별 준비 상태 확인"
3. "자동 시작 설정된 스케줄 확인"
```

**동시 방송 모니터링:**
```
1. "현재 방송 중인 모든 채널 상태"
2. "입력 상태가 backup인 채널 알려줘"
3. "문제 있는 채널 즉시 알림"
```

## 💡 운영 효율성 향상 팁

### 1. Slack Bot 활용
- **빠른 확인**: `/tencent` 명령어로 즉시 대시보드 접근
- **버튼 클릭**: 복잡한 명령어 없이 버튼으로 제어
- **팀 공유**: Slack 채널에서 모든 팀원이 상태 확인

### 2. MCP Server (AI) 활용
- **자연어 질문**: "채널 상태 확인해줘" 같은 자연스러운 질문
- **통합 분석**: 여러 서비스 상태를 한 번에 분석
- **보고서 생성**: 일일/주간 리포트 자동 생성
- **트러블슈팅**: 문제 원인 분석 및 해결 방안 제시

### 3. 스케줄 자동화
- **자동 시작**: 방송 시간에 자동으로 채널 시작
- **자동 알림**: 방송 2시간 전, 30분 전 알림
- **자동 종료**: 방송 종료 시간에 자동 중지

### 4. 모니터링 자동화
- **상태 체크**: 주기적으로 채널 상태 확인
- **장애 감지**: 문제 발생 시 즉시 알림
- **Failover 추적**: Failover 발생 이력 추적

## 📊 운영 KPI 추적

다음과 같은 운영 지표를 추적할 수 있습니다:

- **방송 가동률**: 채널 running 시간 / 전체 시간
- **Failover 발생률**: Failover 횟수 / 방송 건수
- **평균 복구 시간**: 장애 발생부터 복구까지 시간
- **자동화율**: 자동 시작/종료된 방송 / 전체 방송
- **입력 안정성**: MAIN 입력 사용 시간 / 전체 시간

## 🚀 다음 단계

1. **알림 설정**: 중요한 이벤트에 대한 Slack 알림 설정
2. **대시보드 구축**: 주요 지표를 한눈에 볼 수 있는 대시보드
3. **자동화 확장**: 더 많은 워크플로우 자동화
4. **AI 활용 확대**: 자연어 기반 운영 확대
